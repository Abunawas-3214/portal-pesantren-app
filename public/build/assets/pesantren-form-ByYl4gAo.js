import{q as w,W as _,r as $,j as e,a as C}from"./app-2ReULWO2.js";import{I as l}from"./InputError-woi6E6bw.js";import{s as P}from"./slugify-PRid-sdd.js";import{L as S}from"./loader-Db9ebDha.js";const K=["lowokwaru","blimbing","kedungkandang","klojen","sukun"];function M({pesantren:a,users:g,program:x,tingkat:b}){const f=w(),c=a==null?void 0:a.programs.map(s=>s.id),m=a==null?void 0:a.tingkats.map(s=>s.id);function h(s){const i=new Date(s),n=i.getFullYear(),v=String(i.getMonth()+1).padStart(2,"0"),k=String(i.getDate()).padStart(2,"0");return`${n}-${v}-${k}`}const{data:t,setData:d,post:u,put:T,errors:r,reset:D,processing:o}=_({user_id:(a==null?void 0:a.user.id)||"",name:(a==null?void 0:a.name)||"",slug:(a==null?void 0:a.slug)||"",alamat:(a==null?void 0:a.alamat)||"",kecamatan:(a==null?void 0:a.kecamatan)||"",pendiri:(a==null?void 0:a.pendiri)||"",pengasuh:(a==null?void 0:a.pengasuh)||"",tanggal_berdiri:a?h(a.tanggal_berdiri):"",jumlah_santri:(a==null?void 0:a.jumlah_santri)||"",gender:(a==null?void 0:a.gender)||"",program:c||[],tingkat:m||[],program_unggulan:(a==null?void 0:a.program_unggulan)||"",contact:(a==null?void 0:a.contact)||"",logo:null,foto_sampul:null,_method:a?"PUT":"POST"});$.useEffect(()=>{const s=P(t.name,{lower:!0,strict:!0});d("slug",s)},[t.name]);const p=s=>{const i=Array.from(s.target.selectedOptions).map(n=>n.value);d("program",i)},j=s=>{const i=Array.from(s.target.selectedOptions).map(n=>n.value);d("tingkat",i)},y=s=>{const i=s.target.value,n=i.startsWith("0")?`62${i.substring(1)}`:i;d("contact",n)},N=s=>{s.preventDefault(),u(a?route("pesantren.update",a.id):route("pesantren.store"))};return e.jsxs("form",{className:"space-y-6",onSubmit:N,children:[f.props.can.user_set_pesantren&&e.jsx("div",{className:"grid grid-cols-6 gap-6",children:e.jsxs("div",{className:"col-span-6 sm:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"User"}),e.jsxs("select",{disabled:o,id:"user_id",value:t.user_id,onChange:s=>d("user_id",s.target.value),className:`block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${r.user_id?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":""}`,children:[e.jsx("option",{value:"",children:"Pilih user"}),g.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]}),e.jsx(l,{message:r.user_id})]})}),e.jsxs("div",{className:"grid grid-cols-6 gap-6",children:[e.jsxs("div",{className:"col-span-6 sm:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Nama Pesantren"}),e.jsx("input",{disabled:o,value:t.name,onChange:s=>d("name",s.target.value),type:"text",id:"name",placeholder:"Pesantren RMI NU Kota Malang",className:`block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${r.name?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":""}`}),e.jsx(l,{message:r.name})]}),e.jsxs("div",{className:"col-span-6 sm:col-span-3",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Slug ",e.jsx("span",{className:"text-xs text-gray-400",children:"(tergenerate secara otomatis)"})]}),e.jsx("input",{disabled:o,value:t.slug,onChange:s=>d("slug",s.target.value),type:"text",id:"slug",className:`block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${r.slug?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":""}`}),e.jsx(l,{message:r.slug})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-6",children:[e.jsxs("div",{className:"col-span-6 sm:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Alamat Lengkap"}),e.jsx("input",{disabled:o,value:t.alamat,onChange:s=>d("alamat",s.target.value),type:"text",id:"alamat",placeholder:"Jl. K.H. Hasyim Ashari No.21, Kauman, Kec. Klojen, Kota Malang, Jawa Timur, 65119",className:`block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${r.alamat?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":""}`}),e.jsx(l,{message:r.alamat})]}),e.jsxs("div",{className:"col-span-6 sm:col-span-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Kecamatan"}),e.jsxs("select",{disabled:o,id:"kecamatan",value:t.kecamatan,onChange:s=>d("kecamatan",s.target.value),className:`block w-full px-3 capitalize py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${r.kecamatan?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":""}`,children:[e.jsx("option",{value:"",children:"Pilih Kecamatan"}),K.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsx(l,{message:r.kecamatan})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-6",children:[e.jsxs("div",{className:"col-span-6 sm:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Pendiri ",e.jsx("span",{className:"text-xs text-gray-400",children:"(pisahkan dengan koma jika lebih dari satu)"})]}),e.jsx("textarea",{disabled:o,value:t.pendiri,onChange:s=>d("pendiri",s.target.value),id:"pendiri",className:`block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${r.pendiri?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":""}`}),e.jsx(l,{message:r.pendiri})]}),e.jsxs("div",{className:"col-span-6 sm:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Pengasuh ",e.jsx("span",{className:"text-xs text-gray-400",children:"(pisahkan dengan koma jika lebih dari satu)"})]}),e.jsx("textarea",{disabled:o,value:t.pengasuh,onChange:s=>d("pengasuh",s.target.value),id:"pengasuh",className:`block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${r.pengasuh?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":""}`}),e.jsx(l,{message:r.pengasuh})]}),e.jsxs("div",{className:"col-span-6 sm:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tanggal Berdiri"}),e.jsx("input",{disabled:o,type:"date",value:t.tanggal_berdiri,onChange:s=>d("tanggal_berdiri",s.target.value),id:"tanggal_berdiri",className:`block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${r.tanggal_berdiri?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":""}`}),e.jsx(l,{message:r.tanggal_berdiri})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-6",children:[e.jsxs("div",{className:"col-span-6 sm:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Program Unggulan"}),e.jsx("input",{disabled:o,value:t.program_unggulan,onChange:s=>d("program_unggulan",s.target.value),id:"program_unggulan",className:`block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${r.program_unggulan?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":""}`}),e.jsx(l,{message:r.program_unggulan})]}),e.jsxs("div",{className:"col-span-6 sm:col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Jumlah Santri ",e.jsx("span",{className:"text-xs text-gray-400",children:"(Rata-rata dalam satu tahun)"})]}),e.jsx("input",{disabled:o,value:t.jumlah_santri,type:"number",onChange:s=>d("jumlah_santri",s.target.value),id:"jumlah_santri",className:`block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${r.jumlah_santri?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":""}`}),e.jsx(l,{message:r.jumlah_santri})]}),e.jsxs("div",{className:"col-span-6 sm:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Kontak yang dapat dihubungi"}),e.jsx("input",{disabled:o,type:"number",value:t.contact,onChange:y,id:"contact",placeholder:"6281234567890",className:`block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${r.contact?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":""}`}),e.jsx(l,{message:r.contact})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-6",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Gender"}),e.jsxs("select",{disabled:o,id:"gender",value:t.gender,onChange:s=>d("gender",s.target.value),className:`block w-full px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${r.gender?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":""}`,children:[e.jsx("option",{value:"",children:"Pilih Gender"}),e.jsx("option",{value:"putra",children:"Putra"}),e.jsx("option",{value:"putri",children:"Putri"}),e.jsx("option",{value:"putra_putri",children:"Putra & Putri"})]}),e.jsx(l,{message:r.gender})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Program ",e.jsx("span",{className:"text-xs text-gray-400",children:"(Tahan tombol ctrl/cmd utnuk memilih lebih dari 1)"})]}),e.jsx("select",{disabled:o,id:"program",defaultValue:c==null?void 0:c.map(s=>s.toString()),multiple:!0,onChange:p,className:`block w-full h-16 px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${r.program?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":""}`,children:x.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))}),e.jsx(l,{message:r.program})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Tingkat ",e.jsx("span",{className:"text-xs text-gray-400",children:"(Tahan tombol ctrl/cmd utnuk memilih lebih dari 1)"})]}),e.jsx("select",{disabled:o,id:"tingkat",multiple:!0,defaultValue:m==null?void 0:m.map(s=>s.toString()),onChange:j,className:`block w-full h-24 px-3 py-2 mt-1 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm ${r.tingkat?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":""}`,children:b.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))}),e.jsx(l,{message:r.gender})]})]}),e.jsxs("div",{className:"grid grid-cols-6 gap-6",children:[e.jsxs("div",{className:"col-span-3",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Logo ",e.jsx("span",{className:"text-xs text-gray-400",children:"(berlatar belakang transparan dan berformat .png)"})]}),e.jsx("input",{disabled:o,type:"file",id:"logo",accept:".png",onChange:s=>d("logo",s.target.files?s.target.files[0]:null),className:`block w-full px-3 py-2 mt-1 text-sm text-gray-900 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 ${r.logo?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":""}`}),e.jsx(l,{message:r.logo})]}),e.jsxs("div",{className:"col-span-3",children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Foto Sampul ",e.jsx("span",{className:"text-xs text-gray-400",children:"(Disarankan foto bangunan atau kegiatan terbaik)"})]}),e.jsx("input",{disabled:o,type:"file",id:"foto_sampul",accept:"image/*",onChange:s=>d("foto_sampul",s.target.files?s.target.files[0]:null),className:`block w-full px-3 py-2 mt-1 text-sm text-gray-900 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 ${r.foto_sampul?"border-red-300 text-red-900 focus:ring-red-500 focus:border-red-500":""}`}),e.jsx(l,{message:r.foto_sampul})]})]}),e.jsxs("div",{className:"px-4 py-3 text-right sm:px-6",children:[e.jsx("button",{children:e.jsx(C,{disabled:o,href:route("pesantren.index"),className:`inline-flex items-center px-4 py-2 mr-4 text-sm font-medium text-indigo-700 bg-indigo-100 border border-transparent rounded-md hover:bg-indigo-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${o?"opacity-25 cursor-not-allowed":""}`,children:"Cancel"})}),e.jsx("button",{disabled:o,type:"submit",className:`inline-flex justify-center px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 items-center ${o?"opacity-25 cursor-not-allowed":""}`,children:o?e.jsxs(e.Fragment,{children:[e.jsx(S,{className:"w-3 h-3 mr-2 animate-spin"})," Loading..."]}):a?"Next":"Create"})]})]})}export{M as P};
